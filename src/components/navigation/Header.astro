---
import LogoutButton from "./LogoutButton";
import type { User } from "@supabase/supabase-js";

interface Props {
  user: User | null;
}

const { user } = Astro.props;
const isAuthenticated = !!user;
---

<header
  class="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"
>
  <div class="container flex h-14 items-center justify-between px-4">
    <div class="flex items-center gap-6">
      <a href="/" class="flex items-center gap-2 font-semibold text-lg hover:opacity-80 transition-opacity">
        <span>Flashcards</span>
      </a>
      {
        isAuthenticated && (
          <nav class="hidden md:flex items-center gap-6">
            <a
              href="/flashcards"
              class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Moje fiszki
            </a>
            <a
              href="/reviews"
              class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors"
            >
              Powtórki
            </a>
          </nav>
        )
      }
    </div>
    <div class="flex items-center gap-4">
      {
        isAuthenticated ? (
          <>
            <a
              href="/settings"
              class="text-sm font-medium text-muted-foreground hover:text-foreground transition-colors hidden sm:block"
            >
              Ustawienia
            </a>
            <LogoutButton client:load />
          </>
        ) : (
          <a
            href="/auth/login"
            class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all h-9 px-4 py-2 bg-primary text-primary-foreground hover:bg-primary/90"
          >
            Zaloguj się
          </a>
        )
      }
    </div>
  </div>
</header>

<style>
  header {
    border-bottom: 1px solid hsl(var(--border));
  }
</style>
